<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <meta charset="UTF-8">
    <title>ğŸ’•memberBoard_memberupdateğŸ’•</title>
</head>
 <script src="https://code.jquery.com/jquery-3.6.0.js"></script> <!-- ajaxë¥¼ ìœ„í•œ jquery -->
 <script>   //ìˆ˜ì • ajax
 const memberUpdate = () =>  {

     let memberUpdateData = new FormData($('#updateForm')[0]);
    /*/!* memberUpdateData.append("memberId",$("#member_id").val());
     memberUpdateData.append("memberEmail", $("#member_email").val());*!/
     memberUpdateData.append("memberPassword", $("#member_password").val());
     memberUpdateData.append("memberName", $("#member_name").val());
     memberUpdateData.append("memberPhone", $("#member_phone").val());*/
     /*memberUpdateData.append("memberFilename", $("#member_filename")[0]);    //ì–˜ëŠ” ì™œ ë‹¤ë¥¼ê¹Œ?*/

     const id = document.querySelector('#member_id').value;
     console.log(memberUpdateData);
/*     const reqUrl = "/member";*/

        $.ajax({
            type: 'post',
            url : '/member/'+id,
            processData : false,
            contentType : false,
            /*enctype : 'multipart/form-data',*/
            cache : false,
            /*timeout : 300000,*/
            data: memberUpdateData,
            success: function ()    {
                location.href = "/member/";
                //ajaxì— ì´ìƒì´ ì—†ëŠ”ì§€ í™•ì¸í•˜ëŠ” console.log
                console.log("memberUpdate í•¨ìˆ˜ í˜¸ì¶œ!")
                /*document.updateForm.submit();*/
            },
            error : function () {
                alert("ajax ì‹¤íŒ¨")
                //ì‹¤í–‰í•˜ë ¤ë©´
            }
        });

     // ê°’ì„ ë‹´ê¸´ í–ˆëŠ”ë° ë„˜ì–´ê°€ëŠ” ê²Œ ì—†ì–´ì„œ controllerë¡œ ê°€ì§€ ì•ŠëŠ”ë‹¤??


     // boardUpdateë¶€ë¶„ ì„ ìƒë‹˜ê»˜ ì—¬ì­¤ë³´ê¸°, ê·¸ëƒ¥ ì“°ì—¬ì§€ëŠ” ê²Œ ë‹¬ëë˜ê±´ê°€?
     // const inputPw = document.getElementById("member_password").value; //ì§€ê¸ˆ ì…ë ¥í•˜ëŠ” ë¹„ë²ˆ, ë¹„ë²ˆì´ ë§ìœ¼ë©´ ìˆ˜ì •ì´ ëœë‹¤~



 }

 </script>

<!-- íŒŒì¼ ì—…ë°ì´íŠ¸í•˜ëŠ”ê²ƒ í•´ê²°í•˜ê¸°! -->

<body>
<h4>memberBoard_memberupdateğŸ’•</h4>

<span th:text="${session.memberEmail}"></span> ë‹˜ ì •ë³´ì…ë‹ˆë‹¤. <br>


    <!-- findAllì—ì„œ th:~ memberListë¥¼ ì¡ì•„ì£¼ë‹ˆ ì½ëŠ”ë‹¤.-->
        <form id="updateForm" enctype="multipart/form-data">
            <input type="hidden" id="member_id" name="memberId" th:value="${member.memberId}" readonly>
            <input type="text" id="member_email" name="memberEmail" th:value="${member.memberEmail}" readonly>
            <input type="password" id="member_password" name="memberPassword" th:value="${member.memberPassword}" >
            <input type="text" id="member_name" name="memberName" th:value="${member.memberName}" >
            <input type="text" id="member_phone" name="memberPhone" th:value="${member.memberPhone}" >
            <input type="file" id="member_file" name="memberFile">
        </form>

        <button th:onclick="memberUpdate([[${member.memberId}]])"> ìˆ˜ì •_ajax </button>


</body>
</html>